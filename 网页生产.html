<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½å†…å®¹ç”Ÿæˆå™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #3498db;
            margin-bottom: 10px;
        }
        
        .main-content {
            display: flex;
            gap: 20px;
        }
        
        .sidebar {
            flex: 1;
            background-color: #fff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .content-area {
            flex: 3;
            background-color: #fff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        textarea {
            min-height: 200px;
            resize: vertical;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        .template-list {
            margin-top: 20px;
        }
        
        .template-item {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .template-item:hover {
            background-color: #f0f0f0;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .template-item h3 {
            margin-bottom: 5px;
            color: #3498db;
        }
        
        .output-section {
            margin-top: 30px;
        }
        
        .output-content {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #ddd;
            min-height: 300px;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .action-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }
        
        .tab-container {
            margin-bottom: 20px;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border: 1px solid transparent;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            background-color: #f5f5f5;
            margin-right: 5px;
            transition: all 0.3s;
        }
        
        .tab:hover {
            background-color: #e0e0e0;
        }
        
        .tab.active {
            background-color: #fff;
            border-color: #ddd;
            border-bottom-color: #fff;
            margin-bottom: -1px;
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
            padding: 20px;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 5px 5px;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .tab-content.active {
            display: block;
        }
        
        .history-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .history-item:hover {
            background-color: #f0f0f0;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            display: none;
        }
        
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: #333;
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .toast.show {
            opacity: 1;
        }
        
        .format-toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
            margin-bottom: 15px;
            padding: 10px;
            background-color: #f5f5f5;
            border-radius: 5px;
        }
        
        .format-btn {
            padding: 8px 12px;
            font-size: 14px;
        }
        
        .topic-suggestion {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .suggestion-tag {
            background-color: #e1f0fa;
            color: #3498db;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .suggestion-tag:hover {
            background-color: #3498db;
            color: white;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #777;
        }
        
        .close-modal:hover {
            color: #333;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar, .content-area {
                flex: none;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .action-buttons button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>æ™ºèƒ½å†…å®¹ç”Ÿæˆå™¨</h1>
            <p>å¿«é€Ÿç”Ÿæˆé«˜è´¨é‡å†…å®¹ï¼Œæé«˜åˆ›ä½œæ•ˆç‡</p>
        </header>
        
        <div class="main-content">
            <div class="sidebar">
                <h2>å†…å®¹æ¨¡æ¿</h2>
                <div class="template-list">
                    <div class="template-item" data-template="article">
                        <h3>æ–‡ç« </h3>
                        <p>ç”Ÿæˆå®Œæ•´çš„æ–‡ç« å†…å®¹ï¼ŒåŒ…æ‹¬æ ‡é¢˜ã€å¼•è¨€ã€æ­£æ–‡å’Œç»“è®º</p>
                    </div>
                    <div class="template-item" data-template="blog">
                        <h3>åšå®¢</h3>
                        <p>ç”Ÿæˆåšå®¢é£æ ¼çš„å†…å®¹ï¼ŒåŒ…æ‹¬ä¸ªäººè§‚ç‚¹å’Œç»éªŒåˆ†äº«</p>
                    </div>
                    <div class="template-item" data-template="social">
                        <h3>ç¤¾äº¤åª’ä½“</h3>
                        <p>ç”Ÿæˆé€‚åˆç¤¾äº¤åª’ä½“å¹³å°çš„ç®€çŸ­å†…å®¹</p>
                    </div>
                    <div class="template-item" data-template="product">
                        <h3>äº§å“æè¿°</h3>
                        <p>ç”Ÿæˆå¸å¼•äººçš„äº§å“æè¿°å’Œå–ç‚¹</p>
                    </div>
                    <div class="template-item" data-template="email">
                        <h3>é‚®ä»¶</h3>
                        <p>ç”Ÿæˆä¸“ä¸šçš„é‚®ä»¶å†…å®¹ï¼ŒåŒ…æ‹¬ä¸»é¢˜å’Œæ­£æ–‡</p>
                    </div>
                </div>
                
                <h2 style="margin-top: 30px;">å†å²è®°å½•</h2>
                <div id="history-list">
                    <!-- å†å²è®°å½•å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            
            <div class="content-area">
                <div class="tab-container">
                    <div class="tabs">
                        <div class="tab active" data-tab="generator">å†…å®¹ç”Ÿæˆ</div>
                        <div class="tab" data-tab="editor">å†…å®¹ç¼–è¾‘</div>
                        <div class="tab" data-tab="settings">è®¾ç½®</div>
                    </div>
                    
                    <div class="tab-content active" id="generator-tab">
                        <div class="form-group">
                            <label for="content-type">å†…å®¹ç±»å‹</label>
                            <select id="content-type">
                                <option value="article">æ–‡ç« </option>
                                <option value="blog">åšå®¢</option>
                                <option value="social">ç¤¾äº¤åª’ä½“</option>
                                <option value="product">äº§å“æè¿°</option>
                                <option value="email">é‚®ä»¶</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="topic">ä¸»é¢˜</label>
                            <input type="text" id="topic" placeholder="è¾“å…¥å†…å®¹ä¸»é¢˜">
                            <div class="topic-suggestion" id="topic-suggestions">
                                <!-- ä¸»é¢˜å»ºè®®å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="keywords">å…³é”®è¯ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰</label>
                            <input type="text" id="keywords" placeholder="è¾“å…¥å…³é”®è¯ï¼Œç”¨é€—å·åˆ†éš”">
                        </div>
                        
                        <div class="form-group">
                            <label for="tone">è¯­è°ƒ</label>
                            <select id="tone">
                                <option value="professional">ä¸“ä¸š</option>
                                <option value="casual">éšæ„</option>
                                <option value="humorous">å¹½é»˜</option>
                                <option value="serious">ä¸¥è‚ƒ</option>
                                <option value="enthusiastic">çƒ­æƒ…</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="length">å†…å®¹é•¿åº¦</label>
                            <select id="length">
                                <option value="short">çŸ­ï¼ˆçº¦200å­—ï¼‰</option>
                                <option value="medium" selected>ä¸­ï¼ˆçº¦500å­—ï¼‰</option>
                                <option value="long">é•¿ï¼ˆçº¦1000å­—ï¼‰</option>
                                <option value="very-long">å¾ˆé•¿ï¼ˆçº¦2000å­—ï¼‰</option>
                            </select>
                        </div>
                        
                        <button id="generate-btn">ç”Ÿæˆå†…å®¹</button>
                        
                        <div class="loading" id="loading-indicator">
                            <div class="loading-spinner"></div>
                            <p>æ­£åœ¨ç”Ÿæˆå†…å®¹ï¼Œè¯·ç¨å€™...</p>
                        </div>
                        
                        <div class="output-section">
                            <h2>ç”Ÿæˆç»“æœ</h2>
                            <div class="output-content" id="output-content">
                                <!-- ç”Ÿæˆçš„å†…å®¹å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
                                <p>æ‚¨ç”Ÿæˆçš„å†…å®¹å°†æ˜¾ç¤ºåœ¨è¿™é‡Œã€‚è¯·å¡«å†™ä¸Šé¢çš„è¡¨å•å¹¶ç‚¹å‡»"ç”Ÿæˆå†…å®¹"æŒ‰é’®ã€‚</p>
                            </div>
                            
                            <div class="action-buttons">
                                <button id="copy-btn">å¤åˆ¶å†…å®¹</button>
                                <button id="save-btn">ä¿å­˜åˆ°å†å²</button>
                                <button id="edit-btn">ç¼–è¾‘å†…å®¹</button>
                                <button id="download-btn">ä¸‹è½½å†…å®¹</button>
                                <button id="analyze-btn">å†…å®¹åˆ†æ</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="editor-tab">
                        <div class="form-group">
                            <label for="editor-title">æ ‡é¢˜</label>
                            <input type="text" id="editor-title" placeholder="è¾“å…¥å†…å®¹æ ‡é¢˜">
                        </div>
                        
                        <div class="format-toolbar">
                            <button class="format-btn" id="format-bold">åŠ ç²—</button>
                            <button class="format-btn" id="format-italic">æ–œä½“</button>
                            <button class="format-btn" id="format-heading">æ ‡é¢˜</button>
                            <button class="format-btn" id="format-list">åˆ—è¡¨</button>
                            <button class="format-btn" id="format-link">é“¾æ¥</button>
                            <button class="format-btn" id="format-quote">å¼•ç”¨</button>
                            <button class="format-btn" id="format-clear">æ¸…é™¤æ ¼å¼</button>
                        </div>
                        
                        <div class="form-group">
                            <label for="editor-content">å†…å®¹</label>
                            <textarea id="editor-content" placeholder="åœ¨è¿™é‡Œç¼–è¾‘å†…å®¹"></textarea>
                        </div>
                        
                        <button id="update-content-btn">æ›´æ–°å†…å®¹</button>
                    </div>
                    
                    <div class="tab-content" id="settings-tab">
                        <div class="form-group">
                            <label for="default-tone">é»˜è®¤è¯­è°ƒ</label>
                            <select id="default-tone">
                                <option value="professional">ä¸“ä¸š</option>
                                <option value="casual">éšæ„</option>
                                <option value="humorous">å¹½é»˜</option>
                                <option value="serious">ä¸¥è‚ƒ</option>
                                <option value="enthusiastic">çƒ­æƒ…</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="default-length">é»˜è®¤å†…å®¹é•¿åº¦</label>
                            <select id="default-length">
                                <option value="short">çŸ­ï¼ˆçº¦200å­—ï¼‰</option>
                                <option value="medium" selected>ä¸­ï¼ˆçº¦500å­—ï¼‰</option>
                                <option value="long">é•¿ï¼ˆçº¦1000å­—ï¼‰</option>
                                <option value="very-long">å¾ˆé•¿ï¼ˆçº¦2000å­—ï¼‰</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="max-history">æœ€å¤§å†å²è®°å½•æ•°</label>
                            <input type="number" id="max-history" value="10" min="1" max="50">
                        </div>
                        
                        <div class="form-group">
                            <label for="auto-save">è‡ªåŠ¨ä¿å­˜</label>
                            <select id="auto-save">
                                <option value="true">å¯ç”¨</option>
                                <option value="false" selected>ç¦ç”¨</option>
                            </select>
                        </div>
                        
                        <button id="save-settings-btn">ä¿å­˜è®¾ç½®</button>
                        <button id="clear-history-btn" style="background-color: #e74c3c; margin-left: 10px;">æ¸…é™¤å†å²è®°å½•</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="toast" id="toast-message"></div>
    
    <div class="modal" id="analysis-modal">
        <div class="modal-content">
            <span class="close-modal" id="close-analysis">&times;</span>
            <h2 style="margin-bottom: 20px; color: #3498db;">å†…å®¹åˆ†æ</h2>
            <div id="analysis-result">
                <!-- åˆ†æç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–å˜é‡
            let contentHistory = JSON.parse(localStorage.getItem('contentHistory')) || [];
            let settings = JSON.parse(localStorage.getItem('settings')) || {
                defaultTone: 'professional',
                defaultLength: 'medium',
                maxHistory: 10,
                autoSave: false
            };
            
            // ä¸»é¢˜å»ºè®®æ•°æ®
            const topicSuggestions = {
                'article': ['äººå·¥æ™ºèƒ½å‘å±•è¶‹åŠ¿', 'å¯æŒç»­å‘å±•ä¸ç¯ä¿', 'å¥åº·ç”Ÿæ´»æ–¹å¼', 'èŒåœºæŠ€èƒ½æå‡', 'æ•°å­—åŒ–è½¬å‹'],
                'blog': ['æˆ‘çš„ç¯çƒæ—…è¡Œ', 'ç¾é£Ÿæ¢ç´¢ä¹‹æ—…', 'è¯»ä¹¦å¿ƒå¾—åˆ†äº«', 'ç”Ÿæ´»æ–¹å¼æ”¹å˜', 'ä¸ªäººæˆé•¿å†ç¨‹'],
                'social': ['æ–°äº§å“å‘å¸ƒ', 'é™æ—¶æ´»åŠ¨é€šçŸ¥', 'è¡Œä¸šçƒ­ç‚¹åˆ†æ', 'ç”¨æˆ·æ•…äº‹åˆ†äº«', 'èŠ‚æ—¥ç¥ç¦'],
                'product': ['æ™ºèƒ½æ‰‹æœº', 'å¥åº·ç›‘æµ‹äº§å“', 'å­¦ä¹ å·¥å…·å¥—è£…', 'æˆ·å¤–è¿åŠ¨è£…å¤‡', 'åŠå…¬æ•ˆç‡å·¥å…·'],
                'email': ['ä¸šåŠ¡åˆä½œé‚€è¯·', 'äº§å“æ›´æ–°é€šçŸ¥', 'å®¢æˆ·æ»¡æ„åº¦è°ƒæŸ¥', 'ä¼šè®®é‚€è¯·å‡½', 'æ„Ÿè°¢ä¿¡']
            };
            
            // åŠ è½½è®¾ç½®
            document.getElementById('default-tone').value = settings.defaultTone;
            document.getElementById('default-length').value = settings.defaultLength;
            document.getElementById('max-history').value = settings.maxHistory;
            document.getElementById('auto-save').value = settings.autoSave.toString();
            document.getElementById('tone').value = settings.defaultTone;
            document.getElementById('length').value = settings.defaultLength;
            
            // åŠ è½½å†å²è®°å½•
            updateHistoryList();
            
            // æ›´æ–°ä¸»é¢˜å»ºè®®
            updateTopicSuggestions(document.getElementById('content-type').value);
            
            // æ ‡ç­¾åˆ‡æ¢
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„activeç±»
                    tabs.forEach(t => t.classList.remove('active'));
                    // æ·»åŠ å½“å‰æ ‡ç­¾çš„activeç±»
                    this.classList.add('active');
                    
                    // éšè—æ‰€æœ‰å†…å®¹
                    const tabContents = document.querySelectorAll('.tab-content');
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // æ˜¾ç¤ºå½“å‰æ ‡ç­¾å¯¹åº”çš„å†…å®¹
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId + '-tab').classList.add('active');
                });
            });
            
            // å†…å®¹ç±»å‹å˜æ›´æ—¶æ›´æ–°ä¸»é¢˜å»ºè®®
            document.getElementById('content-type').addEventListener('change', function() {
                updateTopicSuggestions(this.value);
            });
            
            // æ¨¡æ¿é€‰æ‹©
            const templateItems = document.querySelectorAll('.template-item');
            templateItems.forEach(item => {
                item.addEventListener('click', function() {
                    const template = this.getAttribute('data-template');
                    document.getElementById('content-type').value = template;
                    
                    // æ›´æ–°ä¸»é¢˜å»ºè®®
                    updateTopicSuggestions(template);
                    
                    // æ ¹æ®æ¨¡æ¿ç±»å‹è®¾ç½®é»˜è®¤ä¸»é¢˜
                    switch(template) {
                        case 'article':
                            document.getElementById('topic').value = 'å¦‚ä½•æé«˜å·¥ä½œæ•ˆç‡';
                            document.getElementById('keywords').value = 'æ•ˆç‡,æ—¶é—´ç®¡ç†,å·¥ä½œæ–¹æ³•,ç”Ÿäº§åŠ›';
                            break;
                        case 'blog':
                            document.getElementById('topic').value = 'æˆ‘çš„æ—…è¡Œç»å†';
                            document.getElementById('keywords').value = 'æ—…è¡Œ,ä½“éªŒ,æ–‡åŒ–,é£æ™¯';
                            break;
                        case 'social':
                            document.getElementById('topic').value = 'æ–°äº§å“å‘å¸ƒ';
                            document.getElementById('keywords').value = 'æ–°å“,å‘å¸ƒ,ç‰¹æ€§,ä¼˜æƒ ';
                            break;
                        case 'product':
                            document.getElementById('topic').value = 'æ™ºèƒ½æ‰‹æœº';
                            document.getElementById('keywords').value = 'æ€§èƒ½,å¤–è§‚,ä»·æ ¼,åŠŸèƒ½';
                            break;
                        case 'email':
                            document.getElementById('topic').value = 'ä¸šåŠ¡åˆä½œé‚€è¯·';
                            document.getElementById('keywords').value = 'åˆä½œ,æœºä¼š,æ–¹æ¡ˆ,è”ç³»';
                            break;
                    }
                    
                    // åˆ‡æ¢åˆ°ç”Ÿæˆå™¨æ ‡ç­¾
                    document.querySelector('.tab[data-tab="generator"]').click();
                });
            });
            
            // ç”Ÿæˆå†…å®¹æŒ‰é’®
            document.getElementById('generate-btn').addEventListener('click', function() {
                const contentType = document.getElementById('content-type').value;
                const topic = document.getElementById('topic').value;
                const keywords = document.getElementById('keywords').value;
                const tone = document.getElementById('tone').value;
                const length = document.getElementById('length').value;
                
                if (!topic) {
                    showToast('è¯·è¾“å…¥å†…å®¹ä¸»é¢˜');
                    return;
                }
                
                // æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨
                document.getElementById('loading-indicator').style.display = 'block';
                
                // æ¨¡æ‹Ÿå†…å®¹ç”Ÿæˆè¿‡ç¨‹ï¼ˆå®é™…åº”ç”¨ä¸­å¯ä»¥æ›¿æ¢ä¸ºAPIè°ƒç”¨ï¼‰
                setTimeout(() => {
                    const generatedContent = generateContent(contentType, topic, keywords, tone, length);
                    document.getElementById('output-content').innerHTML = generatedContent;
                    document.getElementById('loading-indicator').style.display = 'none';
                    
                    // å¦‚æœå¯ç”¨äº†è‡ªåŠ¨ä¿å­˜ï¼Œåˆ™è‡ªåŠ¨ä¿å­˜åˆ°å†å²è®°å½•
                    if (settings.autoSave) {
                        saveToHistory();
                    }
                }, 1500);
            });
            
            // å¤åˆ¶å†…å®¹æŒ‰é’®
            document.getElementById('copy-btn').addEventListener('click', function() {
                const content = document.getElementById('output-content').innerText;
                navigator.clipboard.writeText(content).then(() => {
                    showToast('å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
                });
            });
            
            // ä¿å­˜åˆ°å†å²æŒ‰é’®
            document.getElementById('save-btn').addEventListener('click', saveToHistory);
            
            // ç¼–è¾‘å†…å®¹æŒ‰é’®
            document.getElementById('edit-btn').addEventListener('click', function() {
                const content = document.getElementById('output-content').innerHTML;
                const topic = document.getElementById('topic').value || 'æœªå‘½åå†…å®¹';
                
                document.getElementById('editor-title').value = topic;
                document.getElementById('editor-content').value = content.replace(/<[^>]*>/g, '');
                
                // åˆ‡æ¢åˆ°ç¼–è¾‘å™¨æ ‡ç­¾
                document.querySelector('.tab[data-tab="editor"]').click();
            });
            
            // ä¸‹è½½å†…å®¹æŒ‰é’®
            document.getElementById('download-btn').addEventListener('click', function() {
                const content = document.getElementById('output-content').innerText;
                const topic = document.getElementById('topic').value || 'æœªå‘½åå†…å®¹';
                
                const blob = new Blob([content], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = topic.replace(/\s+/g, '_') + '.txt';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showToast('å†…å®¹å·²ä¸‹è½½');
            });
            
            // å†…å®¹åˆ†ææŒ‰é’®
            document.getElementById('analyze-btn').addEventListener('click', function() {
                const content = document.getElementById('output-content').innerText;
                
                if (content.includes('æ‚¨ç”Ÿæˆçš„å†…å®¹å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ')) {
                    showToast('æ²¡æœ‰å†…å®¹å¯åˆ†æ');
                    return;
                }
                
                // å†…å®¹åˆ†æ
                const wordCount = content.replace(/\s+/g, ' ').split(' ').length;
                const charCount = content.replace(/\s+/g, '').length;
                const paragraphCount = content.split(/\n\s*\n/).length;
                const readingTime = Math.ceil(wordCount / 300);
                
                // å…³é”®è¯åˆ†æ
                const keywords = document.getElementById('keywords').value.split(',').map(k => k.trim()).filter(k => k);
                const keywordOccurrences = {};
                
                keywords.forEach(keyword => {
                    const regex = new RegExp(keyword, 'gi');
                    const matches = content.match(regex);
                    keywordOccurrences[keyword] = matches ? matches.length : 0;
                });
                
                // æ˜¾ç¤ºåˆ†æç»“æœ
                const analysisResult = document.getElementById('analysis-result');
                analysisResult.innerHTML = `
                    <div style="margin-bottom: 20px;">
                        <h3 style="margin-bottom: 10px;">åŸºæœ¬ç»Ÿè®¡</h3>
                        <p><strong>å­—æ•°ç»Ÿè®¡ï¼š</strong> ${wordCount} å­—</p>
                        <p><strong>å­—ç¬¦ç»Ÿè®¡ï¼š</strong> ${charCount} ä¸ªå­—ç¬¦</p>
                        <p><strong>æ®µè½æ•°é‡ï¼š</strong> ${paragraphCount} æ®µ</p>
                        <p><strong>ä¼°è®¡é˜…è¯»æ—¶é—´ï¼š</strong> çº¦ ${readingTime} åˆ†é’Ÿ</p>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h3 style="margin-bottom: 10px;">å†…å®¹ä¿¡æ¯</h3>
                        <p><strong>å†…å®¹ç±»å‹ï¼š</strong> ${getContentTypeName(document.getElementById('content-type').value)}</p>
                        <p><strong>è¯­è°ƒé£æ ¼ï¼š</strong> ${document.getElementById('tone').options[document.getElementById('tone').selectedIndex].text}</p>
                        <p><strong>å†…å®¹é•¿åº¦ï¼š</strong> ${document.getElementById('length').options[document.getElementById('length').selectedIndex].text}</p>
                    </div>
                `;
                
                // å¦‚æœæœ‰å…³é”®è¯ï¼Œæ˜¾ç¤ºå…³é”®è¯åˆ†æ
                if (keywords.length > 0) {
                    let keywordAnalysis = `
                        <div>
                            <h3 style="margin-bottom: 10px;">å…³é”®è¯åˆ†æ</h3>
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr style="background-color: #f5f5f5;">
                                    <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">å…³é”®è¯</th>
                                    <th style="padding: 8px; text-align: center; border: 1px solid #ddd;">å‡ºç°æ¬¡æ•°</th>
                                </tr>
                    `;
                    
                    keywords.forEach(keyword => {
                        keywordAnalysis += `
                            <tr>
                                <td style="padding: 8px; border: 1px solid #ddd;">${keyword}</td>
                                <td style="padding: 8px; text-align: center; border: 1px solid #ddd;">${keywordOccurrences[keyword]}</td>
                            </tr>
                        `;
                    });
                    
                    keywordAnalysis += `</table></div>`;
                    analysisResult.innerHTML += keywordAnalysis;
                }
                
                // æ˜¾ç¤ºåˆ†ææ¨¡æ€æ¡†
                document.getElementById('analysis-modal').style.display = 'flex';
            });
            
            // å…³é—­åˆ†ææ¨¡æ€æ¡†
            document.getElementById('close-analysis').addEventListener('click', function() {
                document.getElementById('analysis-modal').style.display = 'none';
                        });
            
            // æ›´æ–°å†…å®¹æŒ‰é’®
            document.getElementById('update-content-btn').addEventListener('click', function() {
                const title = document.getElementById('editor-title').value;
                const content = document.getElementById('editor-content').value;
                
                document.getElementById('topic').value = title;
                document.getElementById('output-content').innerText = content;
                
                // åˆ‡æ¢åˆ°ç”Ÿæˆå™¨æ ‡ç­¾
                document.querySelector('.tab[data-tab="generator"]').click();
                
                showToast('å†…å®¹å·²æ›´æ–°');
            });
            
            // æ ¼å¼åŒ–æŒ‰é’®
            document.getElementById('format-bold').addEventListener('click', function() {
                formatText('**', '**');
            });
            
            document.getElementById('format-italic').addEventListener('click', function() {
                formatText('*', '*');
            });
            
            document.getElementById('format-heading').addEventListener('click', function() {
                formatText('## ', '');
            });
            
            document.getElementById('format-list').addEventListener('click', function() {
                formatText('- ', '');
            });
            
            document.getElementById('format-link').addEventListener('click', function() {
                const url = prompt('è¯·è¾“å…¥é“¾æ¥URL:');
                if (url) {
                    formatText('[', '](' + url + ')');
                }
            });
            
            document.getElementById('format-quote').addEventListener('click', function() {
                formatText('> ', '');
            });
            
            document.getElementById('format-clear').addEventListener('click', function() {
                const textarea = document.getElementById('editor-content');
                const selectedText = textarea.value.substring(textarea.selectionStart, textarea.selectionEnd);
                
                // ç§»é™¤æ‰€æœ‰Markdownæ ¼å¼
                const cleanText = selectedText
                    .replace(/\*\*(.*?)\*\*/g, '$1') // ç§»é™¤åŠ ç²—
                    .replace(/\*(.*?)\*/g, '$1')     // ç§»é™¤æ–œä½“
                    .replace(/##\s(.*?)(?:\n|$)/g, '$1\n') // ç§»é™¤æ ‡é¢˜
                    .replace(/- (.*?)(?:\n|$)/g, '$1\n')   // ç§»é™¤åˆ—è¡¨
                    .replace(/\[(.*?)\]\((.*?)\)/g, '$1')  // ç§»é™¤é“¾æ¥
                    .replace(/>\s(.*?)(?:\n|$)/g, '$1\n'); // ç§»é™¤å¼•ç”¨
                
                const start = textarea.selectionStart;
                const end = textarea.selectionEnd;
                
                textarea.value = textarea.value.substring(0, start) + cleanText + textarea.value.substring(end);
                textarea.focus();
                textarea.selectionStart = start;
                textarea.selectionEnd = start + cleanText.length;
            });
            
            // ä¿å­˜è®¾ç½®æŒ‰é’®
            document.getElementById('save-settings-btn').addEventListener('click', function() {
                settings.defaultTone = document.getElementById('default-tone').value;
                settings.defaultLength = document.getElementById('default-length').value;
                settings.maxHistory = parseInt(document.getElementById('max-history').value);
                settings.autoSave = document.getElementById('auto-save').value === 'true';
                
                localStorage.setItem('settings', JSON.stringify(settings));
                
                document.getElementById('tone').value = settings.defaultTone;
                document.getElementById('length').value = settings.defaultLength;
                
                showToast('è®¾ç½®å·²ä¿å­˜');
            });
            
            // æ¸…é™¤å†å²è®°å½•æŒ‰é’®
            document.getElementById('clear-history-btn').addEventListener('click', function() {
                if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰å†å²è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚')) {
                    contentHistory = [];
                    localStorage.setItem('contentHistory', JSON.stringify(contentHistory));
                    updateHistoryList();
                    showToast('å†å²è®°å½•å·²æ¸…é™¤');
                }
            });
            
            // è¾…åŠ©å‡½æ•°
            function updateHistoryList() {
                const historyList = document.getElementById('history-list');
                historyList.innerHTML = '';
                
                if (contentHistory.length === 0) {
                    historyList.innerHTML = '<p style="padding: 10px; color: #777;">æš‚æ— å†å²è®°å½•</p>';
                    return;
                }
                
                contentHistory.forEach(item => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    historyItem.innerHTML = `
                        <strong>${item.topic}</strong>
                        <div style="font-size: 12px; color: #777;">${item.date} | ${getContentTypeName(item.type)}</div>
                    `;
                    
                    historyItem.addEventListener('click', function() {
                        document.getElementById('topic').value = item.topic;
                        document.getElementById('content-type').value = item.type;
                        document.getElementById('output-content').innerHTML = item.content;
                        
                        // åˆ‡æ¢åˆ°ç”Ÿæˆå™¨æ ‡ç­¾
                        document.querySelector('.tab[data-tab="generator"]').click();
                    });
                    
                    historyList.appendChild(historyItem);
                });
            }
            
            function updateTopicSuggestions(contentType) {
                const suggestionsContainer = document.getElementById('topic-suggestions');
                suggestionsContainer.innerHTML = '';
                
                const suggestions = topicSuggestions[contentType] || [];
                
                suggestions.forEach(suggestion => {
                    const tag = document.createElement('span');
                    tag.className = 'suggestion-tag';
                    tag.textContent = suggestion;
                    
                    tag.addEventListener('click', function() {
                        document.getElementById('topic').value = suggestion;
                    });
                    
                    suggestionsContainer.appendChild(tag);
                });
            }
            
            function formatText(prefix, suffix) {
                const textarea = document.getElementById('editor-content');
                const start = textarea.selectionStart;
                const end = textarea.selectionEnd;
                const selectedText = textarea.value.substring(start, end);
                const replacement = prefix + selectedText + suffix;
                
                textarea.value = textarea.value.substring(0, start) + replacement + textarea.value.substring(end);
                textarea.focus();
                textarea.selectionStart = start + prefix.length;
                textarea.selectionEnd = start + prefix.length + selectedText.length;
            }
            
            function saveToHistory() {
                const content = document.getElementById('output-content').innerHTML;
                const topic = document.getElementById('topic').value || 'æœªå‘½åå†…å®¹';
                const contentType = document.getElementById('content-type').value;
                
                if (content.includes('æ‚¨ç”Ÿæˆçš„å†…å®¹å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ')) {
                    showToast('æ²¡æœ‰å†…å®¹å¯ä¿å­˜');
                    return;
                }
                
                // æ·»åŠ åˆ°å†å²è®°å½•
                const historyItem = {
                    id: Date.now(),
                    topic: topic,
                    content: content,
                    type: contentType,
                    date: new Date().toLocaleString()
                };
                
                contentHistory.unshift(historyItem);
                
                // é™åˆ¶å†å²è®°å½•æ•°é‡
                if (contentHistory.length > settings.maxHistory) {
                    contentHistory = contentHistory.slice(0, settings.maxHistory);
                }
                
                // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                localStorage.setItem('contentHistory', JSON.stringify(contentHistory));
                
                // æ›´æ–°å†å²è®°å½•åˆ—è¡¨
                updateHistoryList();
                
                showToast('å†…å®¹å·²ä¿å­˜åˆ°å†å²è®°å½•');
            }
            
            function showToast(message) {
                const toast = document.getElementById('toast-message');
                toast.textContent = message;
                toast.classList.add('show');
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }
            
            function getContentTypeName(type) {
                const types = {
                    'article': 'æ–‡ç« ',
                    'blog': 'åšå®¢',
                    'social': 'ç¤¾äº¤åª’ä½“',
                    'product': 'äº§å“æè¿°',
                    'email': 'é‚®ä»¶'
                };
                
                return types[type] || type;
            }
            
            // å†…å®¹ç”Ÿæˆå‡½æ•°
            function generateContent(type, topic, keywords, tone, length) {
                // è§£æå…³é”®è¯
                const keywordArray = keywords.split(',').map(k => k.trim()).filter(k => k);
                
                // æ ¹æ®å†…å®¹ç±»å‹ç”Ÿæˆä¸åŒçš„å†…å®¹
                let content = '';
                
                // æ ¹æ®è¯­è°ƒè°ƒæ•´å†…å®¹é£æ ¼
                let toneStyle = '';
                switch(tone) {
                    case 'professional':
                        toneStyle = 'ä¸“ä¸šã€æ­£å¼';
                        break;
                    case 'casual':
                        toneStyle = 'è½»æ¾ã€éšæ„';
                        break;
                    case 'humorous':
                        toneStyle = 'å¹½é»˜ã€é£è¶£';
                        break;
                    case 'serious':
                        toneStyle = 'ä¸¥è‚ƒã€è®¤çœŸ';
                        break;
                    case 'enthusiastic':
                        toneStyle = 'çƒ­æƒ…ã€ç§¯æ';
                        break;
                }
                
                // æ ¹æ®é•¿åº¦ç¡®å®šå†…å®¹é‡
                let contentLength = '';
                switch(length) {
                    case 'short':
                        contentLength = 'ç®€çŸ­';
                        break;
                    case 'medium':
                        contentLength = 'é€‚ä¸­';
                        break;
                    case 'long':
                        contentLength = 'è¯¦ç»†';
                        break;
                    case 'very-long':
                        contentLength = 'éå¸¸è¯¦ç»†';
                        break;
                }
                
                // æ ¹æ®å†…å®¹ç±»å‹ç”Ÿæˆæ¨¡æ¿
                switch(type) {
                    case 'article':
                        content = generateArticle(topic, keywordArray, toneStyle, contentLength);
                        break;
                    case 'blog':
                        content = generateBlog(topic, keywordArray, toneStyle, contentLength);
                        break;
                    case 'social':
                        content = generateSocial(topic, keywordArray, toneStyle, contentLength);
                        break;
                    case 'product':
                        content = generateProduct(topic, keywordArray, toneStyle, contentLength);
                        break;
                    case 'email':
                        content = generateEmail(topic, keywordArray, toneStyle, contentLength);
                        break;
                    default:
                        content = `<p>æœªèƒ½è¯†åˆ«çš„å†…å®¹ç±»å‹: ${type}</p>`;
                }
                
                return content;
            }
            
            function generateArticle(topic, keywords, tone, length) {
                return `
                    <h2>${topic}</h2>
                    <p><strong>å¼•è¨€ï¼š</strong>åœ¨å½“ä»Šå¿«èŠ‚å¥çš„ç¤¾ä¼šä¸­ï¼Œ${topic}å·²ç»æˆä¸ºäººä»¬å…³æ³¨çš„ç„¦ç‚¹ã€‚æœ¬æ–‡å°†ä»å¤šä¸ªè§’åº¦æ¢è®¨è¿™ä¸€ä¸»é¢˜ï¼Œå¸®åŠ©è¯»è€…æ›´å¥½åœ°ç†è§£å…¶ä¸­çš„å…³é”®ç‚¹ã€‚</p>
                    
                    <h3>${keywords[0] || 'ä¸»è¦è§‚ç‚¹'}</h3>
                    <p>${topic}çš„æ ¸å¿ƒåœ¨äºç†è§£å…¶åŸºæœ¬åŸç†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è®¤è¯†åˆ°è¿™ä¸€é¢†åŸŸçš„é‡è¦æ€§å’Œå½±å“åŠ›ã€‚æ— è®ºæ˜¯åœ¨ä¸ªäººå‘å±•è¿˜æ˜¯ç¤¾ä¼šè¿›æ­¥æ–¹é¢ï¼ŒæŒæ¡ç›¸å…³çŸ¥è¯†éƒ½èƒ½å¸¦æ¥æ˜¾è‘—çš„å¥½å¤„ã€‚</p>
                    
                    <h3>${keywords[1] || 'æ·±å…¥åˆ†æ'}</h3>
                    <p>è¿›ä¸€æ­¥æ¢è®¨è¿™ä¸ªè¯é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°è®¸å¤šå€¼å¾—å…³æ³¨çš„ç»†èŠ‚ã€‚ä¸“å®¶ç ”ç©¶è¡¨æ˜ï¼Œåœ¨å®è·µä¸­åº”ç”¨è¿™äº›çŸ¥è¯†å¯ä»¥æé«˜æ•ˆç‡ã€å‡å°‘é”™è¯¯å¹¶è·å¾—æ›´å¥½çš„ç»“æœã€‚è¿™ç§${tone}çš„æ–¹æ³•å·²ç»è¢«è®¸å¤šæˆåŠŸæ¡ˆä¾‹æ‰€è¯å®ã€‚</p>
                    
                    <h3>${keywords[2] || 'å®ç”¨å»ºè®®'}</h3>
                    <p>åŸºäºä»¥ä¸Šåˆ†æï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å®ç”¨çš„å»ºè®®ï¼š</p>
                    <ul>
                        <li>å®šæœŸå­¦ä¹ å’Œæ›´æ–°ç›¸å…³çŸ¥è¯†</li>
                        <li>å®è·µä¸­åº”ç”¨ç†è®ºï¼Œä¸æ–­æ€»ç»“ç»éªŒ</li>
                        <li>ä¸ä»–äººåˆ†äº«å’Œäº¤æµï¼Œè·å–ä¸åŒè§†è§’</li>
                        <li>ä¿æŒ${tone}çš„æ€åº¦ï¼ŒæŒç»­æ”¹è¿›æ–¹æ³•</li>
                    </ul>
                    
                    <h3>ç»“è®º</h3>
                    <p>æ€»è€Œè¨€ä¹‹ï¼Œ${topic}æ˜¯ä¸€ä¸ªå€¼å¾—æ·±å…¥ç ”ç©¶çš„é¢†åŸŸã€‚é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œå¸Œæœ›è¯»è€…èƒ½å¤Ÿå¯¹è¿™ä¸€ä¸»é¢˜æœ‰æ›´åŠ æ¸…æ™°çš„è®¤è¯†ï¼Œå¹¶åœ¨å®é™…ç”Ÿæ´»ä¸­å—ç›Šã€‚è®°ä½ï¼ŒæŒç»­å­¦ä¹ å’Œå®è·µæ˜¯æŒæ¡ä»»ä½•çŸ¥è¯†çš„å…³é”®ã€‚</p>
                `;
            }
            
            function generateBlog(topic, keywords, tone, length) {
                return `
                    <h2>${topic}</h2>
                    <p>å¤§å®¶å¥½ï¼ä»Šå¤©æˆ‘æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹å…³äº${topic}çš„ä¸€äº›ä¸ªäººç»éªŒå’Œæƒ³æ³•ã€‚ä½œä¸ºä¸€ä¸ªå¯¹è¿™ä¸ªé¢†åŸŸå……æ»¡çƒ­æƒ…çš„äººï¼Œæˆ‘å¸Œæœ›æˆ‘çš„åˆ†äº«èƒ½å¤Ÿç»™ä½ å¸¦æ¥ä¸€äº›å¯å‘ã€‚</p>
                    
                    <h3>æˆ‘çš„${keywords[0] || 'åˆæ¬¡ä½“éªŒ'}</h3>
                    <p>è¿˜è®°å¾—æˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦${topic}çš„æ—¶å€™ï¼Œé‚£ç§æ„Ÿè§‰çœŸçš„å¾ˆç‰¹åˆ«ã€‚${tone}åœ°è¯´ï¼Œè¿™æ®µç»å†å½»åº•æ”¹å˜äº†æˆ‘å¯¹è¿™ä¸ªé¢†åŸŸçš„çœ‹æ³•ï¼Œä¹Ÿè®©æˆ‘å¼€å§‹äº†ä¸€æ®µå¥‡å¦™çš„æ¢ç´¢ä¹‹æ—…ã€‚</p>
                    
                    <h3>${keywords[1] || 'å…³é”®å‘ç°'}</h3>
                    <p>åœ¨æ·±å…¥ç ”ç©¶çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°äº†ä¸€äº›éå¸¸æœ‰è¶£çš„äº‹æƒ…ã€‚åŸæ¥${topic}å¹¶ä¸åƒè¡¨é¢çœ‹èµ·æ¥é‚£ä¹ˆç®€å•ï¼Œå®ƒåŒ…å«äº†è®¸å¤šç»†å¾®çš„ç»†èŠ‚å’Œæ·±å±‚æ¬¡çš„å†…æ¶µã€‚è¿™äº›å‘ç°è®©æˆ‘å¯¹æ•´ä¸ªé¢†åŸŸæœ‰äº†æ›´åŠ å…¨é¢çš„ç†è§£ã€‚</p>
                    
                    <h3>${keywords[2] || 'ä¸ªäººå¿ƒå¾—'}</h3>
                    <p>ç»è¿‡ä¸€æ®µæ—¶é—´çš„å®è·µï¼Œæˆ‘æ€»ç»“å‡ºäº†ä¸€äº›ä¸ªäººå¿ƒå¾—ï¼š</p>
                    <ul>
                        <li>ä¿æŒå¥½å¥‡å¿ƒï¼Œä¸æ–­æ¢ç´¢æ–°çš„å¯èƒ½æ€§</li>
                        <li>ä»å¤±è´¥ä¸­å­¦ä¹ ï¼Œæ¯æ¬¡å°è¯•éƒ½æ˜¯æˆé•¿çš„æœºä¼š</li>
                        <li>ä¸å¿—åŒé“åˆçš„äººäº¤æµï¼Œåˆ†äº«ç»éªŒå’Œæƒ³æ³•</li>
                        <li>è®°å½•è‡ªå·±çš„è¿›æ­¥ï¼Œå›é¡¾æˆé•¿çš„è½¨è¿¹</li>
                    </ul>
                    
                    <h3>å†™åœ¨æœ€å</h3>
                    <p>æ„Ÿè°¢å¤§å®¶é˜…è¯»æˆ‘å…³äº${topic}çš„åˆ†äº«ã€‚å¸Œæœ›è¿™ç¯‡åšå®¢èƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¯å‘æˆ–è€…å¸®åŠ©ã€‚å¦‚æœä½ æœ‰ä»»ä½•æƒ³æ³•æˆ–è€…ç»éªŒï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œæˆ‘å¾ˆæœŸå¾…ä¸ä½ äº¤æµï¼</p>
                `;
            }
            
            function generateSocial(topic, keywords, tone, length) {
                // ç¤¾äº¤åª’ä½“å†…å®¹é€šå¸¸è¾ƒçŸ­
                return `
                    <p><strong>#${topic.replace(/\s+/g, '')} #${keywords.join(' #')}</strong></p>
                    <p>ğŸ“¢ ${topic}æœ€æ–°åŠ¨æ€ï¼</p>
                    <p>${tone}åˆ†äº«ï¼š${topic}æ­£åœ¨æ”¹å˜æˆ‘ä»¬çš„ç”Ÿæ´»æ–¹å¼ã€‚æ— è®ºä½ æ˜¯åˆšåˆšäº†è§£è¿˜æ˜¯å·²ç»æ·±å…¥ç ”ç©¶ï¼Œéƒ½ä¸å®¹é”™è¿‡è¿™ä¸ªé‡è¦è¶‹åŠ¿ã€‚</p>
                    <p>ğŸ’¡ ä½ çŸ¥é“å—ï¼Ÿ${keywords[0] || 'æœ€æ–°ç ”ç©¶'}è¡¨æ˜ï¼Œ${topic}å°†åœ¨æœªæ¥å‡ å¹´å†…è·å¾—æ›´å¤§çš„å‘å±•ç©ºé—´ã€‚</p>
                    <p>ğŸ‘‰ ç‚¹å‡»é“¾æ¥äº†è§£æ›´å¤šè¯¦æƒ…ï¼Œä¸è¦å¿˜è®°ç‚¹èµå’Œåˆ†äº«ï¼</p>
                `;
            }
            
            function generateProduct(topic, keywords, tone, length) {
                return `
                    <h2>${topic} - é©æ–°æ‚¨çš„ç”Ÿæ´»ä½“éªŒ</h2>
                    
                    <p><strong>äº§å“ä»‹ç»ï¼š</strong>${topic}æ˜¯ä¸€æ¬¾ä¸“ä¸ºç°ä»£ç”Ÿæ´»è®¾è®¡çš„åˆ›æ–°äº§å“ï¼Œèåˆäº†${keywords.join('ã€')}ç­‰å¤šé¡¹å…ˆè¿›æŠ€æœ¯ï¼Œä¸ºç”¨æˆ·å¸¦æ¥å‰æ‰€æœªæœ‰çš„ä½“éªŒã€‚</p>
                    
                    <h3>äº§å“ç‰¹ç‚¹</h3>
                    <ul>
                        <li><strong>${keywords[0] || 'å“è¶Šæ€§èƒ½'}ï¼š</strong>é‡‡ç”¨æœ€æ–°æŠ€æœ¯ï¼Œæ€§èƒ½è¡¨ç°è¿œè¶…åŒç±»äº§å“</li>
                        <li><strong>${keywords[1] || 'ç²¾è‡´è®¾è®¡'}ï¼š</strong>ç²¾å¿ƒæ‰“é€ çš„å¤–è§‚è®¾è®¡ï¼Œå½°æ˜¾å“è´¨ä¸å“å‘³</li>
                        <li><strong>${keywords[2] || 'å®ç”¨åŠŸèƒ½'}ï¼š</strong>å¤šç§å®ç”¨åŠŸèƒ½ï¼Œæ»¡è¶³æ‚¨çš„å„ç§éœ€æ±‚</li>
                        <li><strong>ä¼˜è´¨ä½“éªŒï¼š</strong>ä»ç»†èŠ‚å…¥æ‰‹ï¼Œä¸ºæ‚¨æä¾›${tone}çš„ä½¿ç”¨ä½“éªŒ</li>
                    </ul>
                    
                    <h3>ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬ï¼Ÿ</h3>
                    <p>æˆ‘ä»¬çš„${topic}ä¸ä»…ä»…æ˜¯ä¸€æ¬¾äº§å“ï¼Œæ›´æ˜¯ä¸€ç§ç”Ÿæ´»æ–¹å¼çš„å‡çº§ã€‚æ— è®ºæ˜¯å·¥ä½œè¿˜æ˜¯ç”Ÿæ´»ï¼Œå®ƒéƒ½èƒ½ä¸ºæ‚¨å¸¦æ¥ä¾¿åˆ©å’Œæ•ˆç‡ã€‚ç°åœ¨è´­ä¹°ï¼Œè¿˜å¯äº«å—é™æ—¶ä¼˜æƒ å’Œå”®åæœåŠ¡ä¿éšœã€‚</p>
                    
                    <p><strong>ç«‹å³è¡ŒåŠ¨ï¼</strong>æŠ¢å…ˆä½“éªŒ${topic}å¸¦æ¥çš„å…¨æ–°å¯èƒ½ï¼Œæ”¹å˜ä»ç°åœ¨å¼€å§‹ã€‚</p>
                `;
            }
            
            function generateEmail(topic, keywords, tone, length) {
                const currentDate = new Date().toLocaleDateString();
                
                return `
                    <p><strong>ä¸»é¢˜ï¼š${topic}</strong></p>
                    <p>å°Šæ•¬çš„å®¢æˆ·/åˆä½œä¼™ä¼´ï¼š</p>
                    
                    <p>æ‚¨å¥½ï¼</p>
                    
                    <p>æˆ‘æ˜¯[æ‚¨çš„å§“å]ï¼Œ[æ‚¨çš„å…¬å¸/ç»„ç»‡]çš„[æ‚¨çš„èŒä½]ã€‚éå¸¸é«˜å…´æœ‰æœºä¼šå°±${topic}ä¸æ‚¨è¿›è¡Œæ²Ÿé€šã€‚</p>
                    
                    <p>å…³äº${keywords[0] || 'æˆ‘ä»¬çš„åˆä½œ'}ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹å‡ ç‚¹æƒ³æ³•ï¼š</p>
                    <ul>
                        <li>${keywords[1] || 'é¡¹ç›®è®¡åˆ’'}ï¼šæˆ‘ä»¬å·²ç»åˆ¶å®šäº†è¯¦ç»†çš„è®¡åˆ’ï¼ŒåŒ…æ‹¬æ—¶é—´è¡¨ã€èµ„æºåˆ†é…å’Œé¢„æœŸæˆæœ</li>
                        <li>${keywords[2] || 'åˆä½œæ–¹å¼'}ï¼šæˆ‘ä»¬å»ºè®®é‡‡ç”¨çµæ´»çš„åˆä½œæ¨¡å¼ï¼Œç¡®ä¿åŒæ–¹éƒ½èƒ½è·å¾—æœ€å¤§æ”¶ç›Š</li>
                        <li>æœªæ¥å±•æœ›ï¼šé€šè¿‡æ­¤æ¬¡åˆä½œï¼Œæˆ‘ä»¬æœŸå¾…å»ºç«‹é•¿æœŸçš„åˆä½œå…³ç³»ï¼Œå…±åŒæ¢ç´¢æ›´å¤šå¯èƒ½æ€§</li>
                    </ul>
                    
                    <p>å¦‚æœæ‚¨å¯¹ä»¥ä¸Šå†…å®¹æœ‰ä»»ä½•ç–‘é—®æˆ–å»ºè®®ï¼Œè¯·éšæ—¶ä¸æˆ‘è”ç³»ã€‚æˆ‘ä»¬éå¸¸æœŸå¾…æ‚¨çš„å›å¤å’Œè¿›ä¸€æ­¥çš„è®¨è®ºã€‚</p>
                    
                    <p>è°¢è°¢æ‚¨çš„æ—¶é—´å’Œå…³æ³¨ï¼</p>
                    
                    <p>æ­¤è‡´</p>
                    <p>æ•¬ç¤¼</p>
                    
                    <p>[æ‚¨çš„å§“å]<br>
                    [æ‚¨çš„èŒä½]<br>
                    [æ‚¨çš„å…¬å¸/ç»„ç»‡]<br>
                    [æ‚¨çš„è”ç³»æ–¹å¼]</p>
                    
                    <p>${currentDate}</p>
                `;
            }
        });
    </script>
</body>
</html>